<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <admin-breadcrumb></admin-breadcrumb>
  </div>
  <div class="col-lg-2">
  </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="ibox-content m-b-sm border-bottom">
    <div class="row">
      <div class="col-sm-4">
        <div class="form-group">
          <label class="control-label" for="search">Search</label>
          <input type="text" id="search" name="product_name" value="" ng-change="ctrl.search()" ng-model="ctrl.model.search" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }" placeholder="Please enter any term" class="form-control">
        </div>
      </div>
    </div>

  </div>
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-content">

          <div ng-if="!ctrl.currentData.length">
            <p>No data for collection.</p>
            <a ui-sref="admin.file-upload" class="btn btn-primary">Upload some files</a>
          </div>
          <div ng-if="ctrl.currentData.length">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                <tr>
                  <th>Name(click to download)</th>
                  <th>Extension</th>
                  <th>Size</th>
                  <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="file in ctrl.currentData track by file._id">
                  <td><a ng-href="{{::file.uri}}" target="_blank">{{::file.name}}</a></td>
                  <td>{{::file.ext}}</td>
                  <td>{{::file.size/1024/1024|number:2}} MB</td>
                  <td>
                    <button ng-click="ctrl.preview(file)" class="btn btn-sm btn-primary">Preview</button>
                    <button ng-if="file.loading" class="btn btn-sm btn-info">Loading</button>
                    <button ng-if="file.parsing" class="btn btn-sm btn-warning">Parsing</button>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
            <pager total-items="ctrl.totalItems" ng-model="ctrl.paging.currentPage" items-per-page="{{ctrl.limit}}" ng-change="ctrl.pageChanged()"
                   num-pages="ctrl.numPages"></pager>
            <pre>Page: {{ctrl.paging.currentPage}} / {{ctrl.numPages}}</pre>
            <div ng-if="ctrl.tables">
              <tabset>
                <tab ng-repeat="table in ctrl.tables" heading="{{ table.name }}" active="table.active">
                </tab>
              </tabset>
              <div ng-repeat="table in ctrl.tables" ng-if="table.active">
                <hot-table settings="table.settings" datarows="table.rows" class="hot handsontable htRowHeaders htColumnHeaders"></hot-table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
